# 왜 이벤트 기반 마이크로서비스인가 ?

이벤트는 엄청나게 큰 규모로 무기한 저장할 수 있고, 모든 서비스가 필요할 때마다 몇 번이라도 소비할 수 있다. <br>
컴퓨팅 리소스를 획득하여 그때그때 릴리스하는 작업이 간편해져 마이크로서비스도 쉽게 생성/관리할 수 있다.

<br>

## 이벤트 기반 마이크로서비스란 ?

현대 이벤트 기반 마이크로서비스 아키텍처에서는 시스템이 이벤트를 생산/소비하는 식으로 서로 통신한다. <br>
이벤트를 소비해도 메시지를 전달한 시스템에서 바로 사라지지 않고, 같은 메시지를 필요로 하는 다른 컨슈머도 가져갈 수 있게 보존된다.

서비스 자체는 조직이 추구하는 비즈니스 목표를 달성할 수 있게 작은 규모로 만들어진다. <br>
서비스는 입력 이벤트 스트림에서 이벤트를 받아 특정한 비즈니스 로직을 적용한 다음, 출력 이벤트를 내보내서 요청-응답 접근에 필요한 데이터를 제공하거나, 다른 필요한 일을 수행한다. <br>

<img width="582" alt="스크린샷 2024-04-29 오후 9 47 05" src="https://github.com/A-Little-Bit-Tech-Frontiers/Building-Event-Driven-Microservices-Book/assets/87420630/3a5c43dd-4602-428f-a2c2-2d9ca41e5a42">

<br>

## 도메인 주도 설계와 경계 컨텍스트

### 도메인

비즈니스가 차지하고 솔루션을 제공하는 문제 공간, 규칙, 프로세스, 아이디어 등 문제 공간과 조금이라도 관계된 것들은 모두 포함된다.

### 하위 도메인

메인 도메인을 이루는 컴포넌트. <br>
특정한 하위 업무에 집중하며, 비즈니스 조직 구조를 반영한다. *(창고, 영업, 엔지니어링 등)*

### 도메인 모델

비즈니스 용도에 맞게 실제 도메인을 추상화한 비즈니스에서 가장 중요한 도메인 조각 및 속성들로 모델을 생성한다. <br>
솔루션 공간의 일부로 비즈니스가 문제를 해결하기 위해 사용하는 구성체이다.

### 경게 컨텍스트

입력, 출력, 이벤트, 요건, 프로세스, 데이터 모델 등 하위 도메인과 연관된 논리적 경계. <br>
이는 응집력이 강해야하고, 내부 기능은 집약적이고, 깊이 연관되어 있고, 통신이 경계를 넘나들지 않고 내부에서만 일어나야 한다. 

<br>

## 이벤트 기반 통신 구조

이벤트 스트리밍 방식의 데이터 통신 구조에서는 데이터를 생산/소유하는 것과 데이터에 접근하는 행위가 철저히 분리된다. <br>
서비스는 직접 요청-응답 api에 얽매이지 않고, 이벤트 스트림 내부에 정의된 이벤트 데이터를 매개로 소통한다. <br>
프로듀서는 그저 자신이 맡은 이벤트 스트림에 잘 정의된 데이터를 생산하는 일만 책임지면 된다.

### 컨슈머가 스스로 모델링과 쿼리를 수행한다

데이터 접근과 모델링 요건은 완전히 컨슈머로 이동해서, 컨슈머는 소스 이벤트 스트림에서 받은 이벤트 사본을 가져온다. <br>
컨슈머는 여러 이벤트 스트림에서 들어온 데이터를 혼합하거나, 쿼리를 하거나, 특정한 비즈니스 로직을 적용하는 일을 전담한다.

### 조직의 데이터 통신이 원활해진다

다른 팀/서비스에서 관심있는 데이터는 공용 이벤트 스트림 세트에 발행함으로써 데이터의 생산과 소유권을 완전히 분리할 수 있다. <br>
덕분에 데이터 통신 구조를 정규화하고 느슨한 결합과 높은 응집도라는 경계 컨텍스트 원칙을 준수할 수 있다.









