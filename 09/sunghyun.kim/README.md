# FaaS 응용 마이크로서비스

서비스로서의 함수(FaaS) 솔루션을 이용하면 개인이 손수 인프라 오버헤드를 관리하지 않고 애플리케이션을 구축, 관리, 배포, 확장할 수 있다. <br>
이는 부하에 맞게 실행 함수 개수를 늘리고 줄이기가 용이해서 부하가 매우 가변적인 상황에서도 기민하게 대응할 수 있다.

## 함수 기반 솔루션을 마이크로서비스로 설계

FaaS 솔루션은 서로 다른 수많은 함수들로 구성되며, 이들이 하는 작업을 합하면 비즈니스 경계 콘텍스트의 솔루션이 된다.

### 엄격한 경계 콘텍스트의 멤버십 관리

솔루션을 구성하는 함수와 내부 이벤트 스트림은 반드시 어떤 경계 콘텍스트에 속해야 한다. <br>
대규모 마이크로서비스로 솔루션을 구축하는 경우 기능, 서비스, 이벤트 스트림에 관한 소유권 문제를 잘 따져봐야 한다. <br>
다음은 경계 콘텍스트를 함수로 관리하는 몇 가지 방법이다.

- 데이터 저장소를 외부 콘텍스트에 보이지 않게 보호한다.
- 다른 콘텍스트와 결합할 경우, 표준 요청-응답 또는 이벤트 기반 인터페이스를 사용한다.
- 어떤 함수가 어떤 콘텍스트에 속하는지를 나타낸 메타데이터를 엄격하게 관리한다.
- 경계 콘텍스트에 매핑된 레포지터리 내부에서 함수 코드를 관리한다.

### 처리 완료 이후에만 오프셋 커밋

오프셋은 함수가 시작되거나 처리가 완료될 때 커밋된다. <br>
주어진 이벤트 또는 이벤트 배치가 처리 완료될 이후에만 오프셋을 커밋하는게 FaaS의 모범 사례이다.

### 적을수록 좋다

FaaS 프레임워크는 단일 함수를 쉽게 작성하고 여러 서비스에 재사용 가능하다는 장점이 있다. <br>
하지만 매우 파편화된 솔루션이 되거나, 함수 소유권이 모호해지거나, 함수를 변경할 경우 다른 서비스에 어떤 부정적인 영향을 미칠지 불확실해질 수 있다.















